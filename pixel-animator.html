<!DOCTYPE html>
<html lang="en">
<head>
    <title>PixelAnimator</title>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, initial-scale=1">
    <meta http-equiv="Content-Security-Policy"
          content="default-src 'none';
            script-src 'unsafe-inline';
            script-src-elem 'unsafe-inline' https://cdn.jsdelivr.net;
            style-src 'unsafe-hashes' 'sha256-ZD0chCyBaNHl+4UwQHJIHGoYhKwMeyCXGgJTKW5/67E=' 'sha256-ICa0DhwZQJsOd/Rn0N8H6FdQ71GfNL+op2zhAQ+Y4mM=';
            style-src-elem 'unsafe-inline';
            connect-src http://www.focus-news.net">
    <script src="https://cdn.jsdelivr.net/npm/pixel-animator@1.1.14/main.js"
            integrity="sha256-5rGy5l2hQZs6VMReze7oXoNq7TrY1GTfKFSDwMeb8L0="
            crossorigin="anonymous">
    </script>
    <style>
        :root {
            color-scheme: light, dark;
        }
        body {
            margin: 0;
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
        }
    </style>
    <script type="module">
        async function rss(url = 'http://www.focus-news.net/RSS/channel_-2.xml', encoding = 'windows-1251', xpath = '//channel/item/title') {
            let node;
            const data = [];
            const response = await fetch(url, {mode: 'no-cors'});
            const buffer = await response.arrayBuffer();
            const body = new TextDecoder(encoding).decode(buffer);
            const xml = new DOMParser().parseFromString(body, 'text/xml');
            const nodes = new XPathEvaluator().createExpression(xpath).evaluate(xml);
            while (node = nodes.iterateNext()) data.push(node.textContent);
            return data;
        }

        rss().then(console.log);

        document.addEventListener('DOMContentLoaded', function () {
            PixelAnimator(null, document.querySelector('main'));
        });

        window.addEventListener('load', ev => console.log('window@load', ev));
        window.addEventListener('hashchange', ev => console.log('window@hashchange', ev));
        window.addEventListener('visibilitychange', ev => console.log('window@visibilitychange', ev));
        window.addEventListener('resize', ev => console.log('window@resize', ev));
        document.addEventListener('DOMContentLoaded', ev => console.log('document@DOMContentLoaded', ev));
        document.addEventListener('scroll', ev => console.log('document@scroll', ev));
        screen.orientation.addEventListener('change', ev => console.log('screen.orientation@change', ev));
        visualViewport.addEventListener('resize', ev => console.log('visualViewport@resize', ev));
        visualViewport.addEventListener('scroll', ev => console.log('visualViewport@scroll', ev));
    </script>
</head>
<body onload="console.log('body@load', event)">
    <main></main>
</body>
</html>